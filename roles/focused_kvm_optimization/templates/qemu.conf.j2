# QEMU Configuration for KVM Host Optimization
# Auto-generated by Ansible - do not edit manually

# User and group for QEMU processes
user = "libvirt-qemu"
group = "libvirt-qemu"

# Memory management
max_files = 32768
max_processes = 1024

# Security
security_driver = "apparmor"
security_default_confined = 1
security_require_confined = 1

# Memory optimization
memory_backing_dir = "/dev/shm"

# Networking
bridge_helper = "/usr/lib/qemu/qemu-bridge-helper"

# CPU affinity - VMs use cores 1-11
# Host processes stay on core 0
vnc_allow_host_audio = 1
vnc_auto_unix_socket = 1

# Logging
stdio_handler = "logd"

# Performance tuning
lock_manager = "lockd"

# Huge pages support
hugetlbfs_mount = "/dev/hugepages"

# Namespaces
namespaces = [ ]

# Capabilities
clear_emulator_capabilities = 1

# Cgroups
cgroup_controllers = [ "cpu", "memory", "devices", "freezer", "blkio" ]
cgroup_device_acl = [
    "/dev/null", "/dev/full", "/dev/zero",
    "/dev/random", "/dev/urandom",
    "/dev/ptmx", "/dev/kvm", "/dev/rtc",
    "/dev/hpet", "/dev/vfio/vfio"
]

# Memory ballooning
relaxed_acs_check = 1
allow_disk_format_probing = 0

# Process limits
max_core = "unlimited"